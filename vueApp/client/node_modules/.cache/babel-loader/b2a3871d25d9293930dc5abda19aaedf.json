{"remainingRequest":"/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/babel-loader/lib/index.js!/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/bluesteel/Desktop/hack19/vueApp/client/src/components/TaskBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/bluesteel/Desktop/hack19/vueApp/client/src/components/TaskBox.vue","mtime":1571626268000},{"path":"/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/bluesteel/Desktop/hack19/vueApp/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport { CheckIcon, SettingsIcon, PlusIcon, PackageIcon, XIcon, TargetIcon, ZapIcon, ZapOffIcon, TrendingUpIcon, CopyIcon, MenuIcon, TrashIcon, HexagonIcon, HelpCircleIcon } from 'vue-feather-icons';\nimport TaskModal from \"../modals/TaskModal.vue\";\nimport TaskSettingsModal from \"../modals/TaskSettingsModal.vue\";\nimport TaskBoxHelp from \"../modals/TaskBoxHelp.vue\";\nimport ButtonToggleBox from \"./widgets/ButtonToggleBox.vue\";\nimport DurationBadge from \"./widgets/DurationBadge.vue\";\nimport MoneyValueBadge from \"./widgets/MoneyValueBadge.vue\";\nimport DueDateBadge from \"./widgets/DueDateBadge.vue\";\nexport default {\n  components: {\n    CheckIcon: CheckIcon,\n    SettingsIcon: SettingsIcon,\n    PlusIcon: PlusIcon,\n    PackageIcon: PackageIcon,\n    XIcon: XIcon,\n    TargetIcon: TargetIcon,\n    ZapIcon: ZapIcon,\n    ZapOffIcon: ZapOffIcon,\n    TrendingUpIcon: TrendingUpIcon,\n    CopyIcon: CopyIcon,\n    MenuIcon: MenuIcon,\n    TrashIcon: TrashIcon,\n    HexagonIcon: HexagonIcon,\n    HelpCircleIcon: HelpCircleIcon,\n    ButtonToggleBox: ButtonToggleBox,\n    TaskModal: TaskModal,\n    TaskSettingsModal: TaskSettingsModal,\n    TaskBoxHelp: TaskBoxHelp,\n    DurationBadge: DurationBadge,\n    MoneyValueBadge: MoneyValueBadge,\n    DueDateBadge: DueDateBadge\n  },\n  data: function data() {\n    return {\n      colors: [],\n      tasks: [],\n      tags: [],\n      newTask: '',\n      expanded: true,\n      box: 'Task',\n      taskHelpModal: false\n    };\n  },\n  computed: {\n    filteredTasks: function filteredTasks() {\n      var _this = this;\n\n      return this.tasks.filter(function (task) {\n        return (task.activation || _this.$store.settings.taskBox.showDeactivated) && (!_this.tags.some(Boolean) || _this.tags.some(function (tag) {\n          return tag && tag === task.goalID;\n        }));\n      });\n    }\n  },\n  created: function created() {\n    this.fetchTasks();\n  },\n  methods: {\n    toggleTag: function toggleTag(goalID) {\n      if (this.tags.includes(goalID)) {\n        this.tags = this.tags.filter(function (tag) {\n          return tag !== goalID;\n        });\n      } else {\n        this.tags.push(goalID);\n      }\n    },\n    changeHighlight: function changeHighlight(task) {\n      if (this.$store.highlightRoutineID === task.routineID) {\n        this.$store.highlightRoutineID = null;\n      } else {\n        this.$store.highlightRoutineID = task.routineID;\n      }\n\n      if (this.$store.highlightGoalID === task.goalID) {\n        this.$store.highlightGoalID = null;\n      } else {\n        this.$store.highlightGoalID = task.goalID;\n      }\n    },\n    addTask: function addTask() {\n      var _this2 = this;\n\n      var param = {\n        item: this.newTask\n      };\n      axios.post('/tasks', param).then(function () {\n        _this2.clearTask();\n\n        _this2.fetchTasks();\n      });\n    },\n    clearTask: function clearTask() {\n      this.newTask = '';\n    },\n    fetchTasks: function fetchTasks() {\n      var _this3 = this;\n\n      axios.get('/tasks').then(function (response) {\n        _this3.tasks = response.data;\n        var now = new Date();\n\n        for (var i = 0; i < _this3.tasks.length; i++) {\n          if (!_this3.tasks[i].activationDate) {\n            _this3.tasks[i].activation = true;\n          } else if (new Date(_this3.tasks[i].activationDate) < now) {\n            _this3.tasks[i].activation = true;\n          } else {\n            _this3.tasks[i].activation = false;\n          }\n        }\n      });\n    },\n    toggleTaskCompletion: function toggleTaskCompletion(task) {\n      var _this4 = this;\n\n      var id = task._id;\n\n      if (task.completion) {\n        axios.patch(\"/tasks/\".concat(id), {\n          completion: false\n        }).then(function () {\n          _this4.$store.settings.points -= Number(task.valuePoints);\n          task.completion = false;\n          axios.patch('/settings/', _this4.$store.settings);\n        });\n      } else {\n        if (!task.routine) {\n          axios.patch(\"/tasks/\".concat(id), {\n            completion: true,\n            focus: false\n          }).then(function () {\n            _this4.$store.settings.points += Number(task.valuePoints);\n            task.completion = true;\n\n            _this4.$set(task, 'focus', false);\n\n            axios.patch('/settings/', _this4.$store.settings);\n          });\n        } else {\n          var r = this.$store.routines.find(function (routine) {\n            return task.routineID === routine._id;\n          });\n          var c = r.completions + 1;\n          axios.patch(\"/routines/\".concat(task.routineID), {\n            completion: true,\n            completions: c\n          }).then(function () {\n            r.completion = true;\n            r.completions += 1;\n          });\n          this.deleteTask(task);\n        }\n      }\n    },\n    toggleTaskFocus: function toggleTaskFocus(task) {\n      var _this5 = this;\n\n      var id = task._id;\n\n      if (task.focus) {\n        axios.patch(\"/tasks/\".concat(id), {\n          focus: false\n        }).then(function () {\n          task.focus = false;\n        });\n      } else {\n        axios.patch(\"/tasks/\".concat(id), {\n          focus: true\n        }).then(function () {\n          _this5.$set(task, 'focus', true);\n        });\n      }\n    },\n    saveChanges: function () {\n      var _saveChanges = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(task) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.patch(\"/tasks/\".concat(task._id), task);\n\n              case 2:\n                task.lastEdited = new Date();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function saveChanges(_x) {\n        return _saveChanges.apply(this, arguments);\n      }\n\n      return saveChanges;\n    }(),\n    deleteTask: function () {\n      var _deleteTask = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(task) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.delete(\"/tasks/\".concat(task._id));\n\n              case 2:\n                this.tasks = this.tasks.filter(function (t) {\n                  return t !== task;\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function deleteTask(_x2) {\n        return _deleteTask.apply(this, arguments);\n      }\n\n      return deleteTask;\n    }(),\n    anyChangeTimer: function anyChangeTimer(item) {\n      var _this6 = this;\n\n      if (item.timer) {\n        axios.put(\"anyChangeTimer/\".concat(item._id, \"/\").concat(item.type, \"/false\")).then(function () {\n          _this6.fetchTasks();\n        });\n      } else {\n        axios.put(\"anyChangeTimer/\".concat(item._id, \"/\").concat(item.type, \"/true\")).then(function () {\n          _this6.fetchTasks();\n        });\n      }\n    },\n    showItemModal: function showItemModal(task) {\n      this.$store.Item = task;\n      this.$modal.show('taskModal');\n    },\n    showTaskSettingsModal: function showTaskSettingsModal() {\n      this.$modal.show('taskSettingsModal');\n    }\n  }\n};",{"version":3,"sources":["TaskBox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div\r\n    class=\"shadow-lg bg-white rounded-lg\"\r\n    style=\"white-space: nowrap;\r\n  margin-bottom: 16px;\r\n  -webkit-column-break-inside: avoid;\r\n        page-break-inside: avoid;\r\n             break-inside: avoid;\"\r\n  >\r\n    <!-- taskbox -->\r\n    <h2 class=\"p-2 bg-gray-200 border-b-2 border-yellow-600\">\r\n      <button-toggle-box\r\n        v-model=\"expanded\"\r\n        expanded-class=\"text-yellow-600\"\r\n        minimized-class=\"hover:text-yellow-600\"\r\n      >\r\n        <check-icon />\r\n      </button-toggle-box>\r\n      <span class=\"text-gray-600 uppercase tracking-wide font-medium text-sm\">\r\n        Tasks\r\n      </span>\r\n      <button\r\n        class=\"text-gray-600 hover:text-yellow-600 align-middle float-right\"\r\n        @click=\"showTaskSettingsModal\"\r\n      >\r\n        <settings-icon />\r\n      </button>\r\n      <button\r\n        class=\"mr-2 text-gray-600 hover:text-yellow-600 align-middle float-right\"\r\n        @click=\"taskHelpModal = true\"\r\n      >\r\n        <help-circle-icon />\r\n      </button>\r\n    </h2>\r\n\r\n    <div\r\n      v-show=\"expanded\"\r\n      class=\"flex p-1\"\r\n    >\r\n      <form\r\n        class=\"flex flex-grow\"\r\n        @submit.prevent=\"addTask\"\r\n      >\r\n        <input\r\n          v-model=\"newTask\"\r\n          class=\"flex-grow px-1 outline-none\"\r\n          type=\"text\"\r\n          placeholder=\"New Task\"\r\n        >\r\n        <button\r\n          type=\"submit\"\r\n          class=\"border-2 p-1 border-gray-500 text-gray-500 hover:text-yellow-500 hover:border-yellow-500 rounded-sm\"\r\n        >\r\n          <plus-icon />\r\n        </button>\r\n      </form>\r\n      <button\r\n        type=\"submit\"\r\n        class=\"p-1 ml-1 border-2 border-yellow-500 bg-yellow-500 text-white hover:bg-yellow-400 rounded-sm flex-shrink-0\"\r\n      >\r\n        <package-icon />\r\n      </button>\r\n    </div>\r\n\r\n    <!-- tag list -->\r\n    <div\r\n      v-show=\"expanded\"\r\n      class=\"flex p-1 overflow-x-auto border-t-2 border-gray-500\"\r\n    >\r\n      <button\r\n        v-for=\"goal in $store.goals\"\r\n        :key=\"goal._id\"\r\n        class=\"border-2 px-1 mr-1 border-gray-500 rounded-sm flex-shrink-0\"\r\n        :class=\"{\r\n          'bg-teal-500 text-white border-teal-500 hover:bg-teal-400 hover:border-teal-500': tags.includes(goal._id),\r\n          'bg-white text-gray-500 border-gray-500 hover:text-teal-500 hover:border-teal-500': !tags.includes(goal._id),\r\n        }\"\r\n        @click=\"toggleTag(goal._id)\"\r\n      >\r\n        {{ goal.name }}\r\n      </button>\r\n    </div>\r\n\r\n    <div\r\n      class=\"\"\r\n      style=\"-webkit-column-break-inside: avoid;\r\n          page-break-inside: avoid;\r\n               break-inside: avoid;\r\n               overflow-y: auto;\r\n               max-height: 81vh;\"\r\n    >\r\n      <ol v-show=\"(tasks.length>0) && (expanded)\">\r\n        <li\r\n          v-for=\"(task, i) in filteredTasks.slice().reverse()\"\r\n          :key=\"task._id\"\r\n          class=\"border-gray-500 border-t-2 flex items-top bg-gray-100 text-left p-1\"\r\n          :class=\"{ 'bg-gray-200': !(i % 2), 'bg-gray-400': task.completion }\"\r\n          @mouseleave=\"changeHighlight(task)\"\r\n          @mouseenter=\"changeHighlight(task)\"\r\n        >\r\n          <button\r\n            v-show=\"task.completion==false\"\r\n            class=\"border-gray-500 border-2 px-1 text-gray-500 hover:text-yellow-600 hover:border-yellow-600 rounded-sm\"\r\n            @click=\"toggleTaskCompletion(task)\"\r\n          >\r\n            <check-icon />\r\n          </button>\r\n          <button\r\n            v-show=\"task.completion==true\"\r\n            class=\"border-2 px-1 border-gray-500 text-gray-500 hover:text-red-500 hover:border-red-500 rounded-sm\"\r\n            @click=\"toggleTaskCompletion(task)\"\r\n          >\r\n            <x-icon />\r\n          </button>\r\n\r\n          <div />\r\n\r\n          <button\r\n            class=\"hover:text-red-500 mx-1\"\r\n            :class=\"{\r\n              'text-gray-500': !task.focus,\r\n              'text-red-500': task.focus\r\n            }\"\r\n            @click=\"toggleTaskFocus(task)\"\r\n          >\r\n            <target-icon />\r\n          </button>\r\n\r\n          <div class=\"border-1 border-solid border-blue-500 w-auto flex-grow\">\r\n            <input\r\n              v-model=\"task.item\"\r\n              type=\"text\"\r\n              class=\"truncate flex-grow pl-1 bg-transparent border-gray-500 h-full w-full\"\r\n              :class=\"{\r\n                'line-through text-gray-600': task.completion,\r\n                'text-gray-900': !task.completion\r\n              }\"\r\n              @keyup.enter=\"saveChanges(task)\"\r\n            >\r\n          </div>\r\n\r\n          <div\r\n            v-show=\"task.valuePoints\"\r\n            class=\"flex p-1 hover:text-yellow-500 text-gray-500\"\r\n          >\r\n            <hexagon-icon />\r\n            <span>{{ task.valuePoints }}</span>\r\n          </div>\r\n\r\n          <div\r\n            v-show=\"task.activationDate && task.activation\"\r\n            class=\"p-1 hover:text-yellow-500 text-gray-500\"\r\n            :title=\"`Task Activated on ${task.activationDate}`\"\r\n          >\r\n            <zap-icon />\r\n          </div>\r\n\r\n          <div\r\n            v-show=\"task.activationDate && !task.activation\"\r\n            class=\"p-1 hover:text-yellow-500 text-gray-500\"\r\n            :title=\"`Task Not Activated`\"\r\n          >\r\n            <zap-off-icon />\r\n          </div>\r\n\r\n          <div\r\n            v-show=\"task.goalID\"\r\n            class=\"text-gray-500 hover:text-teal-400 p-1\"\r\n            :title=\"`${task.goalName}`\"\r\n          >\r\n            <!-- <span class=\"px-1 uppercase tracking-wide font-medium text-sm\">{{ task.goalName }}</span> -->\r\n            <trending-up-icon />\r\n          </div>\r\n\r\n          <div\r\n            v-show=\"task.routine\"\r\n            class=\"p-1\"\r\n            :class=\"{\r\n              'line-through text-gray-500': task.completion,\r\n              'text-blue-500': !task.completion\r\n            }\"\r\n            :title=\"`Generated by Routine on ${task.createdAt}`\"\r\n          >\r\n            <copy-icon />\r\n          </div>\r\n\r\n          <due-date-badge :value=\"task.dueDate\" />\r\n\r\n          <duration-badge :value=\"Number(task.duration)\" />\r\n\r\n          <money-value-badge :value=\"Number(task.valueMoney)\" />\r\n\r\n          <div class=\"flex\">\r\n            <button\r\n              v-if=\"$store.settings.taskBox.showDeleteButton || task.completion\"\r\n              class=\"border-2 ml-1 px-1 border-gray-500 flex-shrink-0 text-gray-500 hover:text-red-500 hover:border-red-500 rounded-sm\"\r\n              @click=\"deleteTask(task)\"\r\n            >\r\n              <trash-icon />\r\n            </button>\r\n            <button\r\n              class=\"border-gray-500 ml-1 border-2 flex-shrink-0 text-gray-500 hover:text-blue-500 hover:border-blue-500 p-1 rounded-sm\"\r\n              @click=\"showItemModal(task)\"\r\n            >\r\n              <menu-icon />\r\n            </button>\r\n          </div>\r\n        </li>\r\n      </ol>\r\n\r\n      <div\r\n        v-show=\"tasks.length==0\"\r\n        class=\"row alert alert-info text-center bg-gray-200\"\r\n      >\r\n        <p class=\"alert alert-info truncate text-gray-500\">\r\n          The Task Box is empty. Create a new Task above!\r\n        </p>\r\n      </div>\r\n\r\n      <task-modal style=\"overflow-y: scroll;\" />\r\n\r\n      <modal\r\n        name=\"taskSettingsModal\"\r\n        height=\"600px\"\r\n        width=\"400px\"\r\n      >\r\n        <task-settings-modal />\r\n      </modal>\r\n      <task-box-help v-model=\"taskHelpModal\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport {\r\n  CheckIcon, SettingsIcon, PlusIcon, PackageIcon, XIcon, TargetIcon, ZapIcon,\r\n  ZapOffIcon, TrendingUpIcon, CopyIcon, MenuIcon, TrashIcon, HexagonIcon, HelpCircleIcon,\r\n} from 'vue-feather-icons'\r\n\r\nimport TaskModal from '../modals/TaskModal.vue'\r\nimport TaskSettingsModal from '../modals/TaskSettingsModal.vue'\r\nimport TaskBoxHelp from '../modals/TaskBoxHelp.vue'\r\n\r\nimport ButtonToggleBox from './widgets/ButtonToggleBox.vue'\r\nimport DurationBadge from './widgets/DurationBadge.vue'\r\nimport MoneyValueBadge from './widgets/MoneyValueBadge.vue'\r\nimport DueDateBadge from './widgets/DueDateBadge.vue'\r\n\r\nexport default {\r\n  components: {\r\n    CheckIcon,\r\n    SettingsIcon,\r\n    PlusIcon,\r\n    PackageIcon,\r\n    XIcon,\r\n    TargetIcon,\r\n    ZapIcon,\r\n    ZapOffIcon,\r\n    TrendingUpIcon,\r\n    CopyIcon,\r\n    MenuIcon,\r\n    TrashIcon,\r\n    HexagonIcon,\r\n    HelpCircleIcon,\r\n    ButtonToggleBox,\r\n    TaskModal,\r\n    TaskSettingsModal,\r\n    TaskBoxHelp,\r\n    DurationBadge,\r\n    MoneyValueBadge,\r\n    DueDateBadge,\r\n  },\r\n  data() {\r\n    return {\r\n      colors: [],\r\n      tasks: [],\r\n      tags: [],\r\n      newTask: '',\r\n      expanded: true,\r\n      box: 'Task',\r\n      taskHelpModal: false,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    filteredTasks() {\r\n      return this.tasks.filter(task => {\r\n        return (task.activation || this.$store.settings.taskBox.showDeactivated) &&\r\n          (!this.tags.some(Boolean) || this.tags.some(tag => tag && tag === task.goalID))\r\n      })\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.fetchTasks()\r\n  },\r\n\r\n  methods: {\r\n    toggleTag(goalID) {\r\n      if (this.tags.includes(goalID)) {\r\n        this.tags = this.tags.filter(tag => tag !== goalID)\r\n      } else {\r\n        this.tags.push(goalID)\r\n      }\r\n    },\r\n    changeHighlight(task) {\r\n      if (this.$store.highlightRoutineID === task.routineID) { this.$store.highlightRoutineID = null } else { this.$store.highlightRoutineID = task.routineID }\r\n      if (this.$store.highlightGoalID === task.goalID) {\r\n        this.$store.highlightGoalID = null\r\n      } else { this.$store.highlightGoalID = task.goalID }\r\n    },\r\n    addTask() {\r\n      let param = {\r\n        item: this.newTask,\r\n      }\r\n      axios\r\n        .post('/tasks', param)\r\n        .then(() => {\r\n          this.clearTask()\r\n          this.fetchTasks()\r\n        })\r\n    },\r\n    clearTask() {\r\n      this.newTask = ''\r\n    },\r\n    fetchTasks() {\r\n      axios.get('/tasks').then(response => {\r\n        this.tasks = response.data\r\n        var now = new Date()\r\n        for (var i = 0; i < this.tasks.length; i++) {\r\n          if (!this.tasks[i].activationDate) {\r\n            this.tasks[i].activation = true\r\n          } else if (new Date(this.tasks[i].activationDate) < now) { this.tasks[i].activation = true } else { this.tasks[i].activation = false }\r\n        }\r\n      })\r\n    },\r\n    toggleTaskCompletion(task) {\r\n      let id = task._id\r\n      \r\n      if (task.completion) {\r\n        axios\r\n          .patch(`/tasks/${id}`, { completion: false })\r\n          .then(() => {\r\n            this.$store.settings.points -= Number(task.valuePoints)\r\n            task.completion = false\r\n            axios.patch('/settings/', this.$store.settings )\r\n          })\r\n      } else {\r\n        if (!task.routine) {\r\n        axios\r\n          .patch(`/tasks/${id}`, { completion: true, focus: false })\r\n          .then(() => {\r\n            this.$store.settings.points += Number(task.valuePoints)\r\n            task.completion = true\r\n            this.$set(task, 'focus', false)\r\n            axios.patch('/settings/', this.$store.settings )\r\n          })\r\n        } else { \r\n          let r = this.$store.routines.find(routine => {\r\n            return task.routineID === routine._id\r\n          })\r\n          let c = r.completions + 1;\r\n          axios\r\n            .patch(`/routines/${task.routineID}`, { completion: true, completions: c })\r\n            .then(() => {\r\n              r.completion = true\r\n              r.completions += 1;\r\n            })\r\n          this.deleteTask(task) \r\n          }\r\n      }\r\n    },\r\n    toggleTaskFocus(task) {\r\n      let id = task._id\r\n      if (task.focus) {\r\n        axios\r\n          .patch(`/tasks/${id}`, { focus: false })\r\n          .then(() => {\r\n            task.focus = false\r\n          })\r\n      } else {\r\n        axios\r\n          .patch(`/tasks/${id}`, { focus: true })\r\n          .then(() => {\r\n            this.$set(task, 'focus', true)\r\n          })\r\n      }\r\n    },\r\n    async saveChanges(task) {\r\n      await axios.patch(`/tasks/${task._id}`, task)\r\n      task.lastEdited = new Date()\r\n    },\r\n    async deleteTask(task) {\r\n      await axios.delete(`/tasks/${task._id}`)\r\n      this.tasks = this.tasks.filter(t => t !== task)\r\n    },\r\n    anyChangeTimer(item) {\r\n      if (item.timer) {\r\n        axios\r\n          .put(`anyChangeTimer/${item._id}/${item.type}/false`)\r\n          .then(() => {\r\n            this.fetchTasks()\r\n          })\r\n      } else {\r\n        axios\r\n          .put(`anyChangeTimer/${item._id}/${item.type}/true`)\r\n          .then(() => {\r\n            this.fetchTasks()\r\n          })\r\n      }\r\n    },\r\n    showItemModal(task) {\r\n      this.$store.Item = task\r\n\r\n      this.$modal.show('taskModal',)\r\n    },\r\n    showTaskSettingsModal() {\r\n      this.$modal.show('taskSettingsModal',)\r\n    },\r\n  },\r\n}\r\n\r\n</script>\r\n"],"sourceRoot":"src/components"}]}